#### JVM的对象头组成 Markword（32位）？
![对象头 Markword（32位）](/pic/对象头%20Mark%20Word（32位）.png)

1. 无锁状态下，当显示或隐式调用 Object.hashcode() 方法时才会在对象头中生成 hashcode
2. 在没有生成 hashcode 的条件下才能升级为偏向锁
   1. 偏向锁状态下，如果偏向的线程没有执行同步代码，另一线程竞争，将其置为无锁状态，然后再竞争锁
   2. 偏向锁状态下，如果偏向的线程执行同步代码，另一线程竞争发起撤销偏向操作，达到安全点后，会有三种情况
      1. 无锁状态
      2. 替换偏向线程
      3. 升级为轻量级锁
3. 轻量级锁状态下，锁竞争会进行 cas 自旋操作，当自旋超过 10 次，或者有超过2个线程竞争时，升级为重量级锁

[【干货+面经】河北王校长口撕系列 并发编程 第三弹](https://player.bilibili.com/player.html?bvid=BV1Pr4y1B7Ec)
