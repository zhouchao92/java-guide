# rdb
rdb（redis database）：快照，在指定的间隔时间内将内存中的数据集快照写入磁盘，实际操作是 fork 一个子进程，先将数据集写入临时文件，写入成功后，再替换之前的文件，用二进制压缩存储。

## 优点：
1. 一个 dump.rdb 文件，方便持久化
2. 容灾性能好，方便备份
3. 性能最大化
4. 相对较大数据集时，效率比 aof 高

## 缺点：
1. 数据安全性低（时间间隔，容易丢数据）
2. fork 子进程协助完成持久化，当数据集过大时，可能导致服务暂停几百毫秒

# aof
aof（append only file）：以日志的形式记录服务器的每一个写、删除操作，以文本记录

## 优点：
1. 数据安全，三种同步策略：每秒同步（异步）、每修改同步（同步）、不同步
2. append 模式，只要日志写入数据不会丢失，redis-check-aof 工具解决数据一致性问题
3. rewrite 模式，定期对文件重写，以达到压缩的目的

## 缺点：
1. aof 文件比 rdb 文件大，且恢复速度慢
2. 数据集大时，比 rdb 启动效率低
3. 运行效率没有 rdb 高